services:
  - type: web
    name: stock-predictor-web
    env: python
    plan: free
    buildCommand: pip install -r requirements.txt
    startCommand: uvicorn backend.app:app --host 0.0.0.0 --port $PORT

cron:
  - name: daily-data-update
    schedule: "0 22 * * 1-5"  # Weekdays at 22:00 UTC (~5pm ET)
    command: python scripts/cron_update_data.py
  
  - name: monthly-prediction
    schedule: "0 22 1 * *"  # 1st of every month at 22:00 UTC (~5pm ET)
    command: python scripts/cron_predict.py

  - name: monthly-retrain
    schedule: "0 2 1 * *"  # 02:00 UTC on the 1st of every month
    command: python scripts/retrain_all.py

    # You can optionally override environment variables per job in the Render dashboard.
